<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mehul Parakh, Palaksh Shah, Taddi Krishna Vamsi">
<meta name="dcterms.date" content="2025-02-25">

<title>Comparing and Merging Jupyter Notebooks: A Guide to Using nbdime</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="BLOG_files/libs/clipboard/clipboard.min.js"></script>
<script src="BLOG_files/libs/quarto-html/quarto.js"></script>
<script src="BLOG_files/libs/quarto-html/popper.min.js"></script>
<script src="BLOG_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="BLOG_files/libs/quarto-html/anchor.min.js"></script>
<link href="BLOG_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="BLOG_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="BLOG_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="BLOG_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="BLOG_files/libs/bootstrap/bootstrap-1bc8a17f135ab3d594c857e9f48e611b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Comparing and Merging Jupyter Notebooks: A Guide to Using nbdime</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Jupyter</div>
    <div class="quarto-category">Version Control</div>
    <div class="quarto-category">Collaboration</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mehul Parakh, Palaksh Shah, Taddi Krishna Vamsi </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 25, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Jupyter Notebooks are now a ubiquitous tool among data scientists, researchers, and developers alike, providing an incredible interactive computing platform, data visualization tool, and collaborative environment. Yet, version control for .ipynb files can prove especially difficult. Unlike text files, Jupyter Notebooks exist in a JSON-based format, containing not just code and markdown but also metadata, execution output, and cell structure. This complexity also makes it challenging for conventional version control tools, such as git diff, to track and present changes effectively.</p>
<p>When several collaborators edit the same notebook, discrepancies frequently occur in the form of concurrent edits, varying execution outputs, or internal structure modifications. Resolving them manually is frustrating, time-consuming, and error-prone. Step forward, nbdime (Notebook Diff and Merge)—a specialized tool that addresses these issues through intelligent diffing and merging that is specifically intended for Jupyter Notebooks. In this blog, we’ll dive into how nbdime simplifies the process of diffing (identifying changes) and merging (combining changes) in Jupyter Notebooks. We’ll explore:</p>
<ul>
<li><p>How nbdime provides clear, structured comparisons of .ipynb files, highlighting differences in code, markdown, outputs, and metadata.</p></li>
<li><p>Strategies for effectively merging conflicting changes, even in complex scenarios.</p></li>
<li><p>A step-by-step guide to using nbdime, both via the command line and its user-friendly web interface.</p></li>
</ul>
<p>By the end of this blog, you’ll have a solid understanding of how to leverage nbdime to streamline collaboration and version control for Jupyter Notebooks, ensuring smoother workflows and more efficient teamwork.</p>
<section id="why-use-nbdime" class="level2">
<h2 class="anchored" data-anchor-id="why-use-nbdime">Why Use nbdime?</h2>
<p>Traditional diffing and merging tools handle Jupyter notebooks as plain text, which makes it hard to understand differences in code, outputs, and metadata well. This usually leads to incomprehensible diffs, particularly for visual components such as plots and rich outputs. <strong>nbdime</strong> is specifically built for Jupyter notebooks, offering structured diffs that point out significant changes in code cells, outputs, and metadata. It also supports effortless three-way merging, which helps resolve conflicts in an efficient manner without compromising the notebook structure. The traditional diffing tools often leads to the following output: <img src="Screenshot(4).png" class="img-fluid" alt="Fig: Showing the output generated by diffing two Jupyter notebooks using conventional diffing tools."> Fig: Showing the output generated by diffing two Jupyter notebooks using conventional diffing tools.</p>
<p>If we look closely at the image showing the output, we can observe that traditional diffing tools simply compare the text and note down the differing cell as it appears, without regard to the output. nbdime, however, interactively presents the differences, with changes in code, outputs, and metadata being presented in a structured manner. Additionally, it offers strong merging functionality, enabling users to fix conflicts effectively without compromising the integrity of Jupyter notebooks. We shall see later in the ensuing sections how nbdime facilitates the merge of Jupyter files.</p>
</section>
</section>
<section id="installation" class="level1">
<h1>Installation</h1>
<p>To efficiently merge and diff the Jupyter notebooks we should first install the nbdime packages. nbdime is a Python package, and its installation is straightforward. Below is a step-by-step guide to get you started.</p>
<p><strong>Step 1:- Ensure Python and pip are Installed</strong></p>
<p>nbdime requires Python and pip (Python’s package installer). If you don’t already have them, download and install Python from <a href="https://www.python.org/downloads/">python.org</a> pip is included by default with Python 3.4 and later.</p>
<p><strong>Step 2:- To use nbdime, install it via pip:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pip install nbdime</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This command installs nbdime and its dependencies. If you prefer to install it in a specific environment (e.g., using conda), activate your environment first.</p>
<p><strong>Step 3:- Verify installation:</strong></p>
<p>After installation, verify that nbdime is installed correctly by running</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>nbdime <span class="sc">--</span>version</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This should display the installed version of nbdime, confirming that the installation was successful.</p>
<p><strong>Step 4:- To integrate nbdime with Git:</strong>(Optional)</p>
<p>To integrate nbdime with Git for seamless version control, run the following command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>nbdime config<span class="sc">-</span>git <span class="sc">--</span>enable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This sets up nbdime as the default diff and merge tool for Jupyter Notebooks in your Git configuration.</p>
<p><strong>Step:- 5. Start Using nbdime</strong></p>
<p>Now you can use nbdime to compare and merge notebooks directly from the command line or through its web interface. For example, to compare two notebooks, use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime diff diffing_1.ipynb diffing_2.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or, to launch the web-based diff viewer, run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime diff<span class="sc">-</span>web diffing_1.ipynb diffing_2.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can similarly merge files with the command,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime merge merging_1.ipynb merging_2.ipynb <span class="sc">--</span>out merged_output1.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or, to launch the web-based merge viewer, run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime merge<span class="sc">-</span>web base.ipynb merging_1.ipynb merging_2.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="key-features-and-explaining-the-command-line-codes" class="level1">
<h1>Key Features and Explaining the Command-line codes</h1>
<p><span style="font-size: 24px;"><strong>1. Notebook-Specific Diffing</strong></span></p>
<ul>
<li><strong>Intelligent Comparison:</strong> Unlike traditional diff tools that treat notebooks as plain JSON, nbdime understands the structure of Jupyter Notebooks. It can intelligently compare:</li>
</ul>
<p><span style="margin-left: 80px;"> ○ Code cells</span></p>
<p><span style="margin-left: 80px;"> ○ Markdown cells</span></p>
<p><span style="margin-left: 80px;"> ○ Outputs (e.g., plots, tables, and text)</span></p>
<p><span style="margin-left: 80px;"> ○ Metadata (e.g., cell execution order, kernel information)</span></p>
<ul>
<li><strong>Context-Awareness:</strong> It preserves the notebook’s structure and readability, making it easier to track changes.</li>
</ul>
<p><span style="font-size: 24px;"><strong>2. Command-Line Interface (CLI)</strong></span></p>
<p><strong>Nbdiff(nbdime diff)</strong>: Compare two notebooks and display differences in the terminal.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime diff diffing_1.ipynb diffing_2.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s try to understand the code,</p>
<p><u><strong>python -m nbdime</strong></u></p>
<ul>
<li><p>This part of the command tells Python to run the nbdime module as a script.</p></li>
<li><p>m stands for “module” and allows you to run a Python module directly from the command line.</p></li>
<li><p>nbdime is the module that provides the diffing and merging functionality for Jupyter Notebooks.</p></li>
</ul>
<p><u><strong>diff</strong></u></p>
<ul>
<li><p>This is the subcommand provided by nbdime to compare two notebooks.</p></li>
<li><p>It tells nbdime to perform a diff operation (i.e., show the differences between the two files).</p></li>
</ul>
<p><u><strong>diffing_1.ipynb diffing_2.ipynb</strong></u></p>
<ul>
<li><p>These are the two Jupyter Notebook files you want to compare.</p></li>
<li><p>diffing_1.ipynb is the first notebook file.</p></li>
<li><p>diffing_2.ipynb is the second notebook file.</p></li>
<li><p>nbdime will compare these two files and display the differences.</p></li>
</ul>
<p>To compare notebooks and see a web based differing we use the prompt:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime diff<span class="sc">-</span>web diffing_1.ipynb diffing_2.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This prompt have the similar breakdown as of the terminal based output the only difference is the use of,</p>
<p><u><strong>diff-web</strong></u></p>
<ul>
<li><p>This is the subcommand provided by nbdime to launch a web-based diff viewer.</p></li>
<li><p>Unlike the diff command, which outputs differences in the terminal, diff-web opens a visual, interactive web interface for comparing notebooks.</p></li>
</ul>
<p><strong>Nbmerge (nbdime merge):</strong> Merge changes from one notebook into another.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime merge merging_1.ipynb merging_2.ipynb <span class="sc">--</span>out merged_output1.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The python -m nbdime command means the same in all cases what changes here is,</p>
<p><u><strong>merge</strong></u></p>
<ul>
<li><p>This is the subcommand provided by nbdime to merge two notebooks.</p></li>
<li><p>It tells nbdime to perform a merge operation (i.e., combine changes from both notebooks into a single notebook).</p></li>
</ul>
<p><u><strong>merging_1.ipynb merging_2.ipynb</strong></u></p>
<ul>
<li><p>These are the two Jupyter Notebook files you want to merge.</p></li>
<li><p>merging_1.ipynb is the first notebook file (often considered the “base” notebook).</p></li>
<li><p>merging_2.ipynb is the second notebook file (often containing changes to be merged into the base notebook).</p></li>
</ul>
<p><u><strong>–out merged_output1.ipynb</strong></u></p>
<ul>
<li><p>This is an optional flag that specifies the output file where the merged notebook will be saved.</p></li>
<li><p>merged_output1.ipynb is the name of the output file. If this flag is not provided, the merged notebook will be printed to the terminal.</p></li>
</ul>
<p>To perform Web based merging,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime merge<span class="sc">-</span>web base.ipynb merging_1.ipynb merging_2.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><u><strong>merge-web</strong></u></p>
<ul>
<li><p>This is the subcommand provided by nbdime to launch a web-based merge viewer.</p></li>
<li><p>Unlike the merge command, which performs the merge directly in the terminal, merge-web opens a visual, interactive web interface for merging notebooks.</p></li>
</ul>
<p><u><strong>base.ipynb merging_1.ipynb merging_2.ipynb</strong></u></p>
<ul>
<li>These are the three Jupyter Notebook files involved in the merge operation:</li>
</ul>
<p><span style="margin-left: 80px;">o base.ipynb: The common ancestor or base version of the notebook.</span></p>
<p><span style="margin-left: 80px;">o merging_1.ipynb: The first modified version of the notebook.</span></p>
<p><span style="margin-left: 80px;">o merging_2.ipynb: The second modified version of the notebook.</span></p>
<ul>
<li><p>nbdime will compare the changes in merging_1.ipynb and merging_2.ipynb relative to base.ipynb and merge them.</p></li>
<li><p>The web based merging involves three files and implies the use of three way merging, where the base notebook is shown alongside the two modified versions, making it easy to understand changes and resolve conflicts.</p></li>
</ul>
<p>The remaining part of the code means the same as that of the terminal based merging</p>
<p><span style="font-size: 24px;"><strong>3. Web-Based Interface</strong></span></p>
<ul>
<li><p><strong>Interactive Visualization</strong>: Launch a web-based diff viewer for a more intuitive and user-friendly experience.</p></li>
<li><p><strong>Side-by-Side Comparison</strong>: View differences between notebooks in a clean, side-by-side layout.</p></li>
<li><p><strong>Conflict Resolution</strong>: Easily resolve merge conflicts in a visual interface.</p></li>
</ul>
<p><span style="font-size: 24px;"><strong>4. Git Integration</strong></span></p>
<ul>
<li><strong>Seamless Version Control</strong>: nbdime can be configured as the default diff and merge tool for Jupyter Notebooks in Git.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>nbdime config<span class="sc">-</span>git <span class="sc">--</span>enable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Git Diff and Merge: Automatically use nbdime for git diff and git merge operations on .ipynb files.</li>
</ul>
<p><span style="font-size: 24px;"><strong>5. Output Comparison</strong></span></p>
<ul>
<li><p>Output-Aware Diffing: nbdime can compare notebook outputs (e.g., plots, tables, and text) in addition to code and markdown.</p></li>
<li><p>Output Filtering: Optionally ignore outputs during diffing to focus on code and markdown changes.</p></li>
</ul>
<p><span style="font-size: 24px;"><strong>6. Customizable Diffing</strong></span></p>
<ul>
<li><p>Configurable Settings: Customize how nbdime handles diffs, such as ignoring metadata or specific cell types.</p></li>
<li><p>Filtering Options: Exclude certain cells or outputs from the diff process.</p></li>
</ul>
<p><span style="font-size: 24px;"><strong>7. Cross-Platform Support</strong></span></p>
<ul>
<li><p>Works Everywhere: nbdime is compatible with Linux, macOS, and Windows.</p></li>
<li><p>Easy Installation: Install via pip or conda:</p></li>
</ul>
<p><span style="font-size: 24px;"><strong>8. Lightweight and Fast</strong></span></p>
<ul>
<li><p>Efficient Performance: Designed to handle large notebooks efficiently, even with complex outputs.</p></li>
<li><p>Minimal Dependencies: Lightweight and easy to integrate into existing workflows.</p></li>
</ul>
<p><span style="font-size: 24px;"><strong>9. Open Source and Actively Maintained</strong></span></p>
<ul>
<li><p>Community-Driven: nbdime is an open-source project with active development and community support.</p></li>
<li><p>Extensible: Developers can extend its functionality to suit specific needs.</p></li>
</ul>
<p><span style="font-size: 24px;"><strong>10. Conflict Resolution</strong></span></p>
<ul>
<li><p>Merge Conflicts: nbdime provides tools to resolve conflicts during notebook merges, ensuring smooth collaboration.</p></li>
<li><p>Interactive Resolution: Use the web interface to resolve conflicts interactively.</p></li>
</ul>
</section>
<section id="code-examples" class="level1">
<h1>Code Examples</h1>
<p>Let’s study with some examples</p>
<p>Firstly, lets take example of diffing and create a Jupyter file namely diffing_1.ipynb with the below cells</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span><span class="dv">10</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>b<span class="op">=</span><span class="dv">11</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a<span class="op">+</span>b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>21</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>x<span class="op">=</span><span class="dv">25</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span><span class="dv">13</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x<span class="op">+</span>y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>38</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>data<span class="op">=</span>pd.DataFrame({</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"X"</span> : [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>],</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Y"</span> : [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>plt.plot(data[<span class="st">'X'</span>],data[<span class="st">'Y'</span>],label<span class="op">=</span><span class="st">"Equation of line: y=x"</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="BLOG_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Let’s take another Jupyter file for diffing namely, diffed_2.ipynnb</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span><span class="dv">10</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>b<span class="op">=</span><span class="dv">11</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a<span class="op">+</span>b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>21</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>x<span class="op">=</span><span class="dv">25</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span><span class="dv">13</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x<span class="op">+</span>y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>38</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>data<span class="op">=</span>pd.DataFrame({</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"X"</span> : [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>],</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Y"</span> : [<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>]</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>plt.plot(data[<span class="st">'X'</span>],data[<span class="st">'Y'</span>],label<span class="op">=</span><span class="st">"Equation of line: y=-x"</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="BLOG_files/figure-html/unnamed-chunk-20-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now we can Diff the file using</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime diff diffing_1.ipynb diffing_2.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Output: <img src="Screenshot(2).png" class="img-fluid" alt="Fig: This is the output we get after diffing in the terminal"> <strong>Fig</strong>: This resembles the output we get after diffing in the terminal</p>
<p>Now trying to get the Web based diffing output</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime diff<span class="sc">-</span>web diffing_1.ipynb diffing_2.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Output: <img src="Screenshot(3).png" class="img-fluid" alt="Fig: Web based output for diffing of jupyter notebook"> <strong>Fig</strong>: Web based output for diffing of jupyter notebook</p>
<p>Here, we can clearly see the output of diffing the two codes, using nbdime help us to get a more interactive and a user friendly output</p>
<p>Now Let’s try with merging of files</p>
<p>First we will create a file namely merging_1.ipynb</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span><span class="dv">5</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>b<span class="op">=</span><span class="dv">6</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a<span class="op">+</span>b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>11</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>x<span class="op">=</span><span class="dv">10</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span><span class="dv">11</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y<span class="op">-</span>x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>data<span class="op">=</span>pd.DataFrame({</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"x"</span>: [<span class="dv">1</span>,<span class="dv">9</span>],</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"y"</span>: [<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>plt.plot(data[<span class="st">"x"</span>],data[<span class="st">"y"</span>])</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">1</span>,<span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1.0, 9.0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">2</span>,<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(2.0, 3.0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="BLOG_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now we will create another file namely, merging_2.ipynb</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span><span class="dv">5</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>b<span class="op">=</span><span class="dv">6</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a<span class="op">+</span>b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>11</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>x<span class="op">=</span><span class="dv">10</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span><span class="dv">11</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x<span class="op">+</span>y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>21</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>data<span class="op">=</span>pd.DataFrame({</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"x"</span>: [<span class="dv">1</span>,<span class="dv">9</span>],</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"y"</span>: [<span class="dv">6</span>,<span class="dv">2</span>]</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>plt.plot(data[<span class="st">"x"</span>],data[<span class="st">"y"</span>])</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="dv">1</span>,<span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1.0, 9.0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">2</span>,<span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(2.0, 6.0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="BLOG_files/figure-html/unnamed-chunk-30-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can get the output for the terminal merging which will directtly store a new Jupyter folder by giving the prompt in the terminal,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime merge merging_1.ipynb merging_2.ipynb <span class="sc">--</span>out merged_output1.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Output:</p>
<p><img src="Screenshot(5).png" class="img-fluid" alt="Fig: Showing the Output of merging using nbdime in the terminal Window"> Fig: Showing the Output of merging using nbdime in the terminal Window</p>
<p>Here it can be clearly noticed that a file has been created named merged_output1.ipynb and the merged file is stored i it, It can also be seen that the locations where conflict has occured have been clearly showed so that it could be manuall changed</p>
<p>Now let,s try the web based output by running the comand in the terminal:</p>
<p>Since web based merging will have three way merging we can create a base file which would just contain our file merging_1.ipynb which will act as both our base file as well as our modified file,</p>
<p>It can be done by giving a prompt in the terminal window</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>copy merging_1.ipynb base.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let’s run the web based prompt,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>python <span class="sc">-</span>m nbdime merge<span class="sc">-</span>web base.ipynb merging_1.ipynb merging_2.ipynb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Output:</p>
<p><img src="Screenshot(1).png" class="img-fluid" alt="Fig: Web based output for merging of Jupyter notebooks"> <strong>Fig</strong>: Web based output for merging of Jupyter notebooks</p>
<p>The merging of two Jupyter notebook is done by nbdime in such a way that it allows you to compare between the conflicts in a better interface</p>
<p>For more examples <a href="https://jupyter.org/enhancement-proposals/08-notebook-diff/notebook-diff.html">read more….</a></p>
</section>
<section id="use-cases" class="level1">
<h1>Use Cases</h1>
<p><span style="font-size: 24px;"><strong>1. Merge Conflict Resolution in Team Workflows</strong></span></p>
<ul>
<li><p>If several team members collaborate on the same Jupyter notebook, manual merging of changes can be tricky because of JSON-based conflicts.</p></li>
<li><p>nbdime’s three-way merge intelligently merges edits without risking lost work.</p></li>
<li><p>It indicates code changes, markdown edits, and output changes, making it easier to resolve conflicts.</p></li>
</ul>
<p><span style="font-size: 24px;"><strong>2. Readable and Clean Diffs for Code Review</strong></span></p>
<ul>
<li><p>In collaborative projects, comparing changes in Jupyter notebooks is challenging with traditional diff tools that show raw JSON.</p></li>
<li><p>nbdime offers a cell-by-cell structured diff, making it easy for teams to comprehend changes in code, text, and outputs.</p></li>
<li><p>This enhances peer reviews and accelerates the approval process.</p></li>
</ul>
<p><span style="font-size: 24px;"><strong>3. Effective Collaboration with Git Integration</strong></span></p>
<ul>
<li><p>Teams working with Git version control can set nbdime as the default diff and merge tool for notebooks.</p></li>
<li><p>This makes it possible for developers, data scientists, and researchers to follow changes easily without having to work with unstructured JSON diffs.</p></li>
<li><p>Assists with feature branch management, parallel development, and reproducibility.</p></li>
</ul>
<p><span style="font-size: 24px;"><strong>4. Experimentation and Model Iterations Tracking</strong></span></p>
<ul>
<li><p>Various members in data science and machine learning teams might make adjustments to models, datasets, or parameters within the same notebook.</p></li>
<li><p>nbdime makes comparisons across various versions easy, such that no critical changes are missed.</p></li>
<li><p>This is especially helpful for monitoring progress across several rounds of analysis.</p></li>
</ul>
<p><span style="font-size: 24px;"><strong>5. Avoiding Accidental Overwrites and Lost Work</strong></span></p>
<ul>
<li><p>In collaborative projects, two authors may edit the same notebook at the same time.</p></li>
<li><p>Without nbdime, combining changes could result in lost changes because of JSON conflicts.</p></li>
<li><p>nbdime’s structured merging preserves all contributions, avoiding unnecessary rework</p></li>
</ul>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>nbdime is a game-changer for managing Jupyter Notebooks, offering notebook-aware diffing and merging that traditional tools can’t match. Whether you’re collaborating, resolving conflicts, or automating workflows, nbdime ensures seamless version control and efficient workflows. Its command-line tools and web-based interface make it easy to track changes and merge notebooks intelligently. For anyone working with Jupyter Notebooks, nbdime is an essential tool to enhance productivity and collaboration, For a better understanding of the library visit <a href="https://nbdime.readthedocs.io/en/latest/">nbdime</a></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>
